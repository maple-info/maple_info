<!DOCTYPE html>
<html lang="ko">
    {% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ character_info.basic_info.character_name }}의 정보</title>
    <link href="/static/css/info.css" rel="stylesheet" />
</head>
<form action="{% url 'chatbot' %}" method="get">
    <button type="submit">챗봇으로 상담하기</button>
</form>
<body>
    <header>
        <h1>{{ character_info.basic_info.character_name }} 정보</h1>
    </header>
    <main>
        <div class="container" style="margin: 0 auto; max-width: 1000px;">
            <div class="col" id="col1">
                <!-- 기본 정보 -->
                <div class="row">
                    <h2>기본 정보</h2>
                    <table>
                        <tr>
                            <td>레벨:</td>
                            <td>{{ character_info.basic_info.character_level|default:"정보 없음" }}</td>
                        </tr>
                        <tr>
                            <td>직업:</td>
                            <td>{{ character_info.basic_info.character_class|default:"정보 없음" }}</td>
                        </tr>
                        <tr>
                            <td>서버:</td>
                            <td>{{ character_info.basic_info.world_name|default:"정보 없음" }}</td>
                        </tr>
                    </table>
                </div>
                
                <!-- 주요 스탯 -->
                <div class="row">
                    <h3>주요 스탯</h3>
                    <table style="width: 100%;">
                        <tr>
                            <td style="text-align: left;">STR</td>
                            <td style="text-align: right;">{{ final_stats.STR|default:"N/A" }}</td>
                        </tr>
                        <tr>
                            <td style="text-align: left;">DEX</td>
                            <td style="text-align: right;">{{ final_stats.DEX|default:"N/A" }}</td>
                        </tr>
                        <tr>
                            <td style="text-align: left;">INT</td>
                            <td style="text-align: right;">{{ final_stats.INT|default:"N/A" }}</td>
                        </tr>
                        <tr>
                            <td style="text-align: left;">LUK</td>
                            <td style="text-align: right;">{{ final_stats.LUK|default:"N/A" }}</td>
                        </tr>
                    </table>
                </div>
                
                <!-- 전투 스탯 -->
                <div class="row">
                    <h3>전투 스탯</h3>
                    <table style="width: 100%;">
                        <tr>
                            <td style="text-align: left;">전투력</td>
                            <td style="text-align: right;">{{ final_stats.전투력|default:"N/A" }}</td>
                        </tr>
                        <tr>
                            <td style="text-align: left;">최소 공격력</td>
                            <td style="text-align: right;">{{ final_stats.최소_스탯공격력|default:"N/A" }}</td>
                        </tr>
                        <tr>
                            <td style="text-align: left;">최대 공격력</td>
                            <td style="text-align: right;">{{ final_stats.최대_스탯공격력|default:"N/A" }}</td>
                        </tr>
                        <tr>
                            <td style="text-align: left;">데미지</td>
                            <td style="text-align: right;">{{ final_stats.데미지|default:"N/A" }}%</td>
                        </tr>
                        <tr>
                            <td style="text-align: left;">보스 몬스터 데미지</td>
                            <td style="text-align: right;">{{ final_stats.보스_몬스터_데미지|default:"N/A" }}%</td>
                        </tr>
                        <tr>
                            <td style="text-align: left;">방어율 무시</td>
                            <td style="text-align: right;">{{ final_stats.방어율_무시|default:"N/A" }}%</td>
                        </tr>
                        <tr>
                            <td style="text-align: left;">크리티컬 확률</td>
                            <td style="text-align: right;">{{ final_stats.크리티컬_확률|default:"N/A" }}%</td>
                        </tr>
                        <tr>
                            <td style="text-align: left;">크리티컬 데미지</td>
                            <td style="text-align: right;">{{ final_stats.크리티컬_데미지|default:"N/A" }}%</td>
                        </tr>
                    </table>
                </div>
                <!-- 능력치 정보 -->
                <div class="row">
                    <h2>어빌리티 정보</h2>
                    <h3>기본 어빌리티</h3>
                    <ul>
                        <li>등급: {{ ability_data.grade|default:"정보 없음" }}</li>
                        {% for ability in ability_data.abilities %}
                            <li>번호: {{ ability.no }}, 등급: {{ ability.grade }}, 값: {{ ability.value }}</li>
                        {% endfor %}
                    </ul>
                    {% comment %} <ul>
                        <pre>{{ equipment_data|default_if_none:"데이터 없음" }}</pre>
                    </ul> {% endcomment %}
                </div>

            </div>

            <!-- 장비 -->
            <div class="col" id="col2">
                {% comment %} <div class="equipment-container">
                    <!-- 반지1 슬롯 -->
                    {% if equipment_data.item_equipment.ring1 %}
                    <div class="slot ring1" onmouseenter="showTooltip(event, 'ring1')" onmouseleave="hideTooltip()">
                        <img src="{{ equipment_data.item_equipment.ring1.icon }}">
                    </div>
                    {% endif %}
                
                    <!-- 반지2 슬롯 -->
                    {% if equipment_data.item_equipment.ring2 %}
                    <div class="slot ring2">
                        <img src="{{ equipment_data.item_equipment.ring2.icon }}">
                    </div>
                    {% endif %}
                
                    <!-- 무기 슬롯 -->
                    {% if equipment_data.item_equipment.ring3 %}
                    <div class="slot ring3">
                        <img src="{{ equipment_data.item_equipment.ring3.icon }}">
                    </div>
                    {% endif %}
                    
                    {% if equipment_data.item_equipment.ring4 %}
                    <div class="slot ring4">
                        <img src="{{ equipment_data.item_equipment.ring4.icon }}">
                    </div>
                    {% endif %}

                    {% if equipment_data.item_equipment.poket %}
                    <div class="slot poket">
                        <img src="{{ equipment_data.item_equipment.poket.icon }}">
                    </div>
                    {% endif %}

                    {% if equipment_data.item_equipment.pendant1 %}
                    <div class="slot pendant1">
                        <img src="{{ equipment_data.item_equipment.pendant1.icon }}">
                    </div>
                    {% endif %}
                    <!-- sssssssssssssssssssssssss -->
                    {% if equipment_data.item_equipment.pendant2 %}
                    <div class="slot pendant2">
                        <img src="{{ equipment_data.item_equipment.pendant2.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.weapon %}
                    <div class="slot weapon">
                        <img src="{{ equipment_data.item_equipment.weapon.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.belt %}
                    <div class="slot belt">
                        <img src="{{ equipment_data.item_equipment.belt.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.hat %}
                    <div class="slot hat">
                        <img src="{{ equipment_data.item_equipment.hat.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.face %}
                    <div class="slot face">
                        <img src="{{ equipment_data.item_equipment.face.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.eyes %}
                    <div class="slot eyes">
                        <img src="{{ equipment_data.item_equipment.eyes.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.top %}
                    <div class="slot top">
                        <img src="{{ equipment_data.item_equipment.top.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.bottom %}
                    <div class="slot bottom">
                        <img src="{{ equipment_data.item_equipment.bottom.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.shoes %}
                    <div class="slot shoes">
                        <img src="{{ equipment_data.item_equipment.shoes.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.earring %}
                    <div class="slot earring">
                        <img src="{{ equipment_data.item_equipment.earring.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.shoulder %}
                    <div class="slot shoulder">
                        <img src="{{ equipment_data.item_equipment.shoulder.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.gloves %}
                    <div class="slot gloves">
                        <img src="{{ equipment_data.item_equipment.gloves.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.android %}
                    <div class="slot android">
                        <img src="{{ equipment_data.item_equipment.android.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.emblem %}
                    <div class="slot emblem">
                        <img src="{{ equipment_data.item_equipment.emblem.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.badge %}
                    <div class="slot badge">
                        <img src="{{ equipment_data.item_equipment.badge.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.medal %}
                    <div class="slot medal">
                        <img src="{{ equipment_data.item_equipment.medal.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.secondary %}
                    <div class="slot secondary">
                        <img src="{{ equipment_data.item_equipment.secondary.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.cape %}
                    <div class="slot cape">
                        <img src="{{ equipment_data.item_equipment.cape.icon }}">
                    </div>
                    {% endif %}
                    {% if equipment_data.item_equipment.heart %}
                    <div class="slot heart">
                        <img src="{{ equipment_data.item_equipment.heart.icon }}">
                    </div>
                    {% endif %}
                    
                </div> {% endcomment %}
                {{ equipment_data|json_script:"equipment-data" }}

                <div class="equipment-container">
                    {% for slot, item in equipment_data.item_equipment.items %}
                        <div class="slot {{ slot }}" onmouseenter="showTooltip(event, '{{ slot }}')" onmouseleave="hideTooltip()">
                            <img src="{{ item.icon }}" alt="{{ item.name }}">
                        </div>
                    {% endfor %}
                </div>

                <div class="tooltip" id="tooltip" style="display: none;"></div>
            </div>
        </div>
    </main>


<script src="/static/css/info.js"></script>
</body> 
</html>